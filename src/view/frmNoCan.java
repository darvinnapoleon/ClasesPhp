/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package view;

import controllers.Cliente;
import controllers.Vales;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPopupMenu;
import javax.swing.table.DefaultTableModel;
import model.mDetVal;

/**
 *
 * @author DARVIN
 */
public class frmNoCan extends javax.swing.JInternalFrame {

    /**
     * Creates new form frmLisCli
     */
    public frmNoCan() {
        initComponents();

    }

    void mostrar() {
        try {
            DefaultTableModel modelo;
            Vales clilis = new Vales();
            mDetVal md = new mDetVal();
            md.setMesvale(cbomes.getSelectedIndex());
            md.setAnovale(cboano.getSelectedItem().toString());
            modelo = clilis.no_can(md);
            this.tbliscli.setModel(modelo);
            tbliscli.getColumnModel().getColumn(0).setPreferredWidth(10);
        tbliscli.getColumnModel().getColumn(1).setPreferredWidth(300);

        } catch (Exception e) {
            JOptionPane.showConfirmDialog(null, e);
        }
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        tbliscli = new javax.swing.JTable();
        cbomes = new javax.swing.JComboBox<>();
        cboano = new javax.swing.JComboBox<>();
        btnent = new javax.swing.JButton();
        btnbus1 = new javax.swing.JButton();
        tfano = new javax.swing.JTextField();
        tfmes = new javax.swing.JTextField();

        setClosable(true);
        setIconifiable(true);
        setMaximizable(true);
        setResizable(true);
        setTitle("CLIENTES");

        jPanel1.setBackground(java.awt.Color.lightGray);
        jPanel1.setToolTipText("");

        tbliscli.setBackground(new java.awt.Color(204, 204, 204));
        tbliscli.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        tbliscli.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null},
                {null, null}
            },
            new String [] {
                "Id", "Apellidos y Nombres"
            }
        ));
        jScrollPane1.setViewportView(tbliscli);
        if (tbliscli.getColumnModel().getColumnCount() > 0) {
            tbliscli.getColumnModel().getColumn(0).setResizable(false);
            tbliscli.getColumnModel().getColumn(0).setPreferredWidth(10);
            tbliscli.getColumnModel().getColumn(1).setResizable(false);
            tbliscli.getColumnModel().getColumn(1).setPreferredWidth(300);
        }

        cbomes.setBackground(new java.awt.Color(255, 102, 0));
        cbomes.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        cbomes.setForeground(new java.awt.Color(255, 0, 0));
        cbomes.setMaximumRowCount(13);
        cbomes.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "mes", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12" }));
        cbomes.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        cbomes.setPreferredSize(new java.awt.Dimension(80, 23));

        cboano.setBackground(new java.awt.Color(255, 102, 0));
        cboano.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        cboano.setForeground(new java.awt.Color(255, 0, 0));
        cboano.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "anio", "2017", "2018", "2019", "2020", "2021", "2022", "2023" }));
        cboano.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                cboanoMouseClicked(evt);
            }
        });

        btnent.setText("Validar");
        btnent.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnentActionPerformed(evt);
            }
        });

        btnbus1.setText("Buscar");
        btnbus1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnbus1ActionPerformed(evt);
            }
        });

        tfano.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                tfanoActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 397, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(cbomes, 0, 72, Short.MAX_VALUE)
                            .addComponent(tfmes))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(cboano, 0, 72, Short.MAX_VALUE)
                            .addComponent(tfano))
                        .addGap(28, 28, 28)
                        .addComponent(btnbus1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btnent)))
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(cbomes, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(cboano, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnent)
                    .addComponent(btnbus1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 12, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(tfmes, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(tfano, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 339, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void cboanoMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_cboanoMouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_cboanoMouseClicked

    private void btnbus1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnbus1ActionPerformed
        // TODO add your handling code here:
        if (cbomes.getSelectedIndex() == 0 || cboano.getSelectedIndex() == 0) {
            JOptionPane.showMessageDialog(null, "Ingresar fecha");
            return;
        } else {
            mostrar();
        }
    }//GEN-LAST:event_btnbus1ActionPerformed

    private void btnentActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnentActionPerformed
        // TODO add your handling code here:
        int YesOrNo = JOptionPane.showConfirmDialog(null, "Estas seguro de regular", "confirma el mensaje", JOptionPane.YES_NO_OPTION);
        if (YesOrNo == 0) {
            for (int i = 0; i < frmNoCan.tbliscli.getRowCount(); i++) {
                mDetVal Sql = new mDetVal();
                Vales emp = new Vales();
                SimpleDateFormat formateador = new SimpleDateFormat(
                    "dd 'de' MMMM 'de' yyyy", new Locale("ES"));
                Date fechaDate = new Date();
                String fec = formateador.format(fechaDate);
                Sql.setResponsable("nc");
                Sql.setFecdetval(fec);
                Sql.setEstdetval("2");
                Sql.setIddetval(Integer.parseInt(tbliscli.getValueAt(i, 0).toString()));
                emp.act_valnocan(Sql);

            }
            mostrar();
        }
    }//GEN-LAST:event_btnentActionPerformed

    private void tfanoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_tfanoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_tfanoActionPerformed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnbus1;
    private javax.swing.JButton btnent;
    private javax.swing.JComboBox<String> cboano;
    private javax.swing.JComboBox<String> cbomes;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    public static javax.swing.JTable tbliscli;
    private javax.swing.JTextField tfano;
    private javax.swing.JTextField tfmes;
    // End of variables declaration//GEN-END:variables
}
